exports.id=316,exports.ids=[316],exports.modules={9834:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>j,metadata:()=>i});var d=c(2474),e=c(26249),f=c.n(e),g=c(7897),h=c.n(g);c(21971);let i={title:"App Cocina SOTOdelPRIOR",description:"Sistema de gesti\xf3n de cocina",icons:{icon:"/icon.png"}};function j({children:a}){return(0,d.jsx)("html",{lang:"en",children:(0,d.jsx)("body",{className:`${f().variable} ${h().variable} antialiased`,children:a})})}},20557:(a,b,c)=>{"use strict";c.d(b,{z:()=>e});var d=c(96330);let e=globalThis.prisma||new d.PrismaClient({log:["query","error","warn"]})},21971:()=>{},21986:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(30274).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Carlos\\\\SOTOdelPRIOR\\\\App cocina SOTOdelPRIOR\\\\apps\\\\web\\\\app\\\\ui\\\\dashboard\\\\sidenav.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Carlos\\SOTOdelPRIOR\\App cocina SOTOdelPRIOR\\apps\\web\\app\\ui\\dashboard\\sidenav.tsx","default")},22086:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,32594,23)),Promise.resolve().then(c.t.bind(c,6413,23)),Promise.resolve().then(c.t.bind(c,61437,23)),Promise.resolve().then(c.t.bind(c,99476,23)),Promise.resolve().then(c.t.bind(c,41452,23)),Promise.resolve().then(c.t.bind(c,86792,23)),Promise.resolve().then(c.t.bind(c,48465,23)),Promise.resolve().then(c.t.bind(c,13592,23))},25086:(a,b,c)=>{"use strict";c.d(b,{default:()=>v});var d=c(92692),e=c(58599),f=c.n(e),g=c(67994),h=c(9537),i=c(30683),j=c(92239),k=c(3310),l=c(46682),m=c(34362),n=c(66457),o=c(34082),p=c(53059);let q=[{name:"Dashboard",href:"/dashboard",icon:i.A},{name:"Productos",href:"/dashboard/products",icon:j.A},{name:"Recetas",href:"/dashboard/recipes",icon:k.A},{name:"Eventos",href:"/dashboard/events",icon:l.A},{name:"Compras",href:"/dashboard/purchasing",icon:m.A},{name:"Tareas",href:"/dashboard/tasks",icon:n.A},{name:"Empleados",href:"/dashboard/employees",icon:o.A},{name:"Configuraci\xf3n",href:"/dashboard/settings",icon:p.A}];var r=c(55067),s=c(81689),t=c(85660);let u=(0,t.createServerReference)("0007821253191e6d3b446d1d5e5b6152e5905f06e4",t.callServer,void 0,t.findSourceMapURL,"signOutAction");function v({user:a,logoUrl:b}){let c=(0,g.usePathname)(),e=q.filter(b=>"Empleados"!==b.name||a?.role==="ADMIN");return(0,d.jsxs)("aside",{className:"w-64 bg-white border-r border-gray-200 h-screen flex flex-col fixed left-0 top-0 z-30 shadow-sm",children:[(0,d.jsx)("div",{className:"p-4 flex justify-center border-b border-gray-100",children:(0,d.jsx)("img",{src:b||"/logo-text.png",alt:"SOTO DEL PRIOR",className:"h-12 object-contain"})}),(0,d.jsxs)("div",{className:"p-6 border-b border-gray-100 flex items-center gap-3",children:[(0,d.jsx)("div",{className:"w-10 h-10 bg-indigo-600 rounded-full flex items-center justify-center text-white font-bold text-lg uppercase",children:a?.name?.[0]||"U"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-bold text-gray-800 text-sm truncate w-32",children:a?.name||"Usuario"}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:a?.role||"Empleado"})]})]}),(0,d.jsx)("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:e.map(a=>{let b=a.icon;return(0,d.jsxs)(f(),{href:a.href,className:(0,h.A)("w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-colors",{"bg-indigo-50 text-indigo-700":c===a.href,"text-gray-600 hover:bg-gray-50 hover:text-gray-900":c!==a.href}),children:[(0,d.jsx)(b,{className:"w-5"}),a.name]},a.name)})}),(0,d.jsxs)("div",{className:"p-4 border-t border-gray-100 space-y-2",children:[(0,d.jsxs)(f(),{href:"/dashboard/profile",className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-gray-600 hover:text-gray-900 rounded-lg hover:bg-gray-50",children:[(0,d.jsx)(r.A,{className:"w-5"}),(0,d.jsx)("span",{children:"Mi Perfil"})]}),(0,d.jsx)("form",{action:u,children:(0,d.jsxs)("button",{className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-red-600 hover:text-red-700 rounded-lg hover:bg-red-50",children:[(0,d.jsx)(s.A,{className:"w-5"}),(0,d.jsx)("span",{children:"Cerrar Sesi\xf3n"})]})})]})]})}},30765:()=>{},34496:(a,b,c)=>{Promise.resolve().then(c.bind(c,25086))},44540:(a,b,c)=>{"use strict";c.d(b,{z:()=>e});var d=c(96330);let e=globalThis.prisma||new d.PrismaClient({log:["query","error","warn"]})},47648:(a,b,c)=>{Promise.resolve().then(c.bind(c,21986))},52525:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>h});var d=c(2474),e=c(21986),f=c(77300),g=c(44540);async function h({children:a}){let b=await (0,f.j2)(),c=await g.z.appConfig.findUnique({where:{id:"default"}});return(0,d.jsxs)("div",{className:"flex h-screen flex-col md:flex-row md:overflow-hidden",children:[(0,d.jsx)("div",{className:"w-full flex-none md:w-64",children:(0,d.jsx)(e.default,{user:b?.user,logoUrl:c?.logoUrl})}),(0,d.jsx)("div",{className:"flex-grow p-6 md:overflow-y-auto md:p-12",children:a})]})}},63058:(a,b,c)=>{"use strict";c.d(b,{QF:()=>r,DY:()=>u,Kd:()=>s});var d=c(60416),e=c(45576),f=c(79915),g=c(39578),h=c(70733),i=c(20557);let{auth:j,signIn:k,signOut:l,handlers:m}=(0,e.Ay)({...{pages:{signIn:"/login"},callbacks:{authorized({auth:a,request:{nextUrl:b}}){let c=!!a?.user;return b.pathname.startsWith("/dashboard")?!!c:!c||"/login"!==b.pathname||Response.redirect(new URL("/dashboard",b))},session:async({session:a,token:b})=>(b.sub&&a.user&&(a.user.id=b.sub),b.role&&a.user&&(a.user.role=b.role),a),jwt:async({token:a,user:b})=>(b&&(a.role=b.role),a)},providers:[]},trustHost:!0,providers:[(0,f.A)({async authorize(a){let b=g.Ikc({email:g.YjP().email(),password:g.YjP().min(6)}).safeParse(a);if(b.success){let{email:a,password:c}=b.data;try{let b=await i.z.user.findUnique({where:{email:a}});if(!b)return null;if(await h.Ay.compare(c,b.password))return{id:b.id,name:b.name,email:b.email,role:b.role};throw new e.xz}catch(a){throw a}}throw new e.xz}})]});var n=c(66961),o=c(96330),p=c(10710),q=c(29818);async function r(a,b){try{await k("credentials",{...Object.fromEntries(b),redirectTo:"/dashboard"})}catch(a){if("NEXT_REDIRECT"===a.message)throw a;if(a instanceof e.lR)switch(a.type){case"CredentialsSignin":case"CallbackRouteError":return"Credenciales inv\xe1lidas.";default:return"Algo sali\xf3 mal."}return console.error("Auth Error:",a),"Algo sali\xf3 mal."}}async function s(){await l()}let t=new o.PrismaClient;async function u(a,b){let c=n.X1.safeParse({name:b.get("name"),email:b.get("email"),password:b.get("password"),role:b.get("role")});if(!c.success)return{errors:c.error.flatten().fieldErrors,message:"Faltan campos obligatorios. Error al registrar usuario."};let{name:d,email:e,password:f,role:g}=c.data,i=await h.Ay.hash(f,10);try{await t.user.create({data:{name:d,email:e,password:i,role:g}})}catch(a){if("P2002"===a.code)return{message:"El email ya est\xe1 uso."};return{message:"Error de base de datos: Error al registrar usuario."}}(0,p.redirect)("/login")}(0,q.D)([r,s,u]),(0,d.A)(r,"6084d6180ae70174e5a257a3dae72947f376681334",null),(0,d.A)(s,"0007821253191e6d3b446d1d5e5b6152e5905f06e4",null),(0,d.A)(u,"605a4f44fdece7bd22f64a1477b26e2a03c4baa896",null)},66961:(a,b,c)=>{"use strict";c.d(b,{Dy:()=>t,E3:()=>k,IH:()=>o,Q$:()=>g,X1:()=>r,d7:()=>p,nb:()=>f,pu:()=>l,sz:()=>s});var d=c(39578);let e=d.Ikc({id:d.YjP(),name:d.YjP().min(1,{message:"El nombre es obligatorio."}),category:d.YjP().optional(),pricingUnit:d.k5n(["KG","G","L","ML","UD"]),pricePerUnit:d.auy.number().gt(0,{message:"El precio debe ser mayor a 0."}),yieldPercent:d.auy.number().min(0).max(100,{message:"El rendimiento debe estar entre 0 y 100."}),allergens:d.YjP().optional(),supplierId:d.YjP().optional()}),f=e.omit({id:!0}),g=e,h=d.Ikc({id:d.YjP().optional(),ingredientId:d.YjP().optional().nullable(),subRecipeId:d.YjP().optional().nullable(),sourceProductId:d.YjP().optional().nullable(),type:d.k5n(["INGREDIENT","SUB_RECIPE"]),quantityGross:d.auy.number().gt(0,{message:"La cantidad debe ser mayor a 0."}),unit:d.k5n(["KG","G","L","ML","UD"])}),i=d.Ikc({id:d.YjP().optional(),order:d.auy.number(),description:d.YjP().min(1,{message:"La descripci\xf3n es obligatoria."}),action:d.YjP().optional(),subAction:d.YjP().optional(),ingredientId:d.YjP().optional().nullable()}),j=d.Ikc({id:d.YjP(),name:d.YjP().min(1,{message:"El nombre es obligatorio."}),category:d.k5n(["PRODUCTO_NO_ELABORADO","ELABORACION_INTERMEDIA","ELABORACION_FINAL"]),classification:d.YjP().optional(),packaging:d.YjP().optional(),portions:d.vkY(a=>""===a?null:Number(a),d.aig().min(1,{message:"Debe ser mayor a 0"}).optional().nullable()),prepTime:d.vkY(a=>""===a?null:Number(a),d.aig().min(0).optional().nullable()),cookTime:d.vkY(a=>""===a?null:Number(a),d.aig().min(0).optional().nullable()),yieldQuantity:d.auy.number().gt(0,{message:"El rendimiento debe ser mayor a 0."}),yieldUnit:d.k5n(["KG","G","L","ML","UD"]).optional(),instructions:d.YjP().optional(),items:d.YOg(h).optional(),steps:d.YOg(i).optional()}),k=j.omit({id:!0}),l=j,m=d.Ikc({id:d.YjP().optional(),recipeId:d.YjP().min(1,{message:"Debe seleccionar una receta."}),servingsOverride:d.auy.number().optional().nullable()}),n=d.Ikc({id:d.YjP(),name:d.YjP().min(1,{message:"El nombre del evento es obligatorio."}),date:d.YjP().transform(a=>new Date(a)),pax:d.auy.number().gt(0,{message:"El n\xfamero de personas debe ser mayor a 0."}),safetyMargin:d.auy.number().min(1,{message:"El margen debe ser al menos 1.0 (100%)."}),status:d.k5n(["DRAFT","CONFIRMED","COMPLETED"]).optional(),menuItems:d.YOg(m).optional()}),o=n.omit({id:!0}),p=n,q=d.Ikc({id:d.YjP(),name:d.YjP().min(1,{message:"El nombre es obligatorio."}),email:d.YjP().email({message:"Email inv\xe1lido."}),password:d.YjP().min(6,{message:"La contrase\xf1a debe tener al menos 6 caracteres."}).optional(),role:d.k5n(["ADMIN","CHEF","EMPLOYEE"]),firstName:d.YjP().optional(),lastName:d.YjP().optional(),dni:d.YjP().optional(),phone:d.YjP().optional(),jobTitle:d.YjP().optional(),dob:d.YjP().optional()}),r=q.omit({id:!0}).extend({password:d.YjP().min(6,{message:"La contrase\xf1a es obligatoria."})}),s=q,t=d.Ikc({id:d.YjP(),title:d.YjP().min(1,{message:"El t\xedtulo es obligatorio."}),description:d.YjP().optional(),assignedToUserId:d.YjP().optional().nullable(),status:d.k5n(["PENDING","IN_PROGRESS","DONE","ISSUE"]),recipeId:d.YjP().optional().nullable(),targetQuantity:d.auy.number().optional().nullable(),plannedStart:d.YjP().optional().nullable(),plannedEnd:d.YjP().optional().nullable()}).omit({id:!0,status:!0})},77300:(a,b,c)=>{"use strict";c.d(b,{j2:()=>i,Y9:()=>l});var d=c(73702),e=c(49438),f=c(79090),g=c(66300),h=c(44540);let{auth:i,signIn:j,signOut:k,handlers:l}=(0,d.Ay)({...{pages:{signIn:"/login"},callbacks:{authorized({auth:a,request:{nextUrl:b}}){let c=!!a?.user;return b.pathname.startsWith("/dashboard")?!!c:!c||"/login"!==b.pathname||Response.redirect(new URL("/dashboard",b))},session:async({session:a,token:b})=>(b.sub&&a.user&&(a.user.id=b.sub),b.role&&a.user&&(a.user.role=b.role),a),jwt:async({token:a,user:b})=>(b&&(a.role=b.role),a)},providers:[]},trustHost:!0,providers:[(0,e.A)({async authorize(a){let b=f.Ikc({email:f.YjP().email(),password:f.YjP().min(6)}).safeParse(a);if(b.success){let{email:a,password:c}=b.data;try{let b=await h.z.user.findUnique({where:{email:a}});if(!b)return null;if(await g.Ay.compare(c,b.password))return{id:b.id,name:b.name,email:b.email,role:b.role};throw new d.xz}catch(a){throw a}}throw new d.xz}})]})},80408:()=>{},81695:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,25696,23))},82766:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,25696,23)),Promise.resolve().then(c.t.bind(c,69411,23)),Promise.resolve().then(c.t.bind(c,8447,23)),Promise.resolve().then(c.t.bind(c,50674,23)),Promise.resolve().then(c.t.bind(c,78886,23)),Promise.resolve().then(c.t.bind(c,24194,23)),Promise.resolve().then(c.t.bind(c,93431,23)),Promise.resolve().then(c.bind(c,23858))},83501:()=>{},87032:()=>{},99820:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>e});var d=c(42131);let e=async a=>[{type:"image/png",sizes:"1014x1024",url:(0,d.fillMetadataSegment)(".",await a.params,"icon.png")+"?aba4b3a0a40019d7"}]},99847:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,32594,23))}};