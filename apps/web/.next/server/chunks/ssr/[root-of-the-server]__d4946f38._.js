module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},95044,a=>{a.n(a.i(52425))},8318,a=>{a.n(a.i(54944))},44665,a=>{a.n(a.i(28992))},43619,a=>{a.n(a.i(79962))},13718,a=>{a.n(a.i(85523))},18198,a=>{a.n(a.i(45518))},62212,a=>{a.n(a.i(66114))},68268,a=>{a.n(a.i(18224))},790,(a,b,c)=>{let{createClientModuleProxy:d}=a.r(11857);a.n(d("[project]/node_modules/next/dist/client/app-dir/link.js <module evaluation>"))},84707,(a,b,c)=>{let{createClientModuleProxy:d}=a.r(11857);a.n(d("[project]/node_modules/next/dist/client/app-dir/link.js"))},97647,a=>{"use strict";a.i(790);var b=a.i(84707);a.n(b)},95936,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={default:function(){return i},useLinkStatus:function(){return h.useLinkStatus}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(64240),g=a.r(7997),h=f._(a.r(97647));function i(a){let b=a.legacyBehavior,c="string"==typeof a.children||"number"==typeof a.children||"string"==typeof a.children?.type,d=a.children?.type?.$$typeof===Symbol.for("react.client.reference");return!b||c||d||(a.children?.type?.$$typeof===Symbol.for("react.lazy")?console.error("Using a Lazy Component as a direct child of `<Link legacyBehavior>` from a Server Component is not supported. If you need legacyBehavior, wrap your Lazy Component in a Client Component that renders the Link's `<a>` tag."):console.error("Using a Server Component as a direct child of `<Link legacyBehavior>` is not supported. If you need legacyBehavior, wrap your Server Component in a Client Component that renders the Link's `<a>` tag.")),(0,g.jsx)(h.default,{...a})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},52617,a=>{"use strict";var b=a.i(717);let c=b.forwardRef(function({title:a,titleId:c,...d},e){return b.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":c},d),a?b.createElement("title",{id:c},a):null,b.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))});a.s(["HomeIcon",0,c],52617)},12397,59732,a=>{"use strict";let b={KG:1,G:.001,L:1,ML:.001,UD:1};function c(a,c,d){return c===d?a:("KG"===c||"G"===c)&&("KG"===d||"G"===d)||("L"===c||"ML"===c)&&("L"===d||"ML"===d)?a*b[c]/b[d]:"UD"===c&&"UD"===d?a:null}function d(a){return new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(a)}a.s(["convertTo",()=>c],59732),a.s(["calculateRecipeCost",()=>function a(b){let d=0;for(let e of b.items)if("INGREDIENT"===e.type&&e.ingredient){let a=e.ingredient.pricePerUnit,b=e.ingredient.pricingUnit,f=e.unit,g=c(e.quantityGross,f,b);null!==g?d+=g*a:console.warn(`Cannot convert ${f} to ${b} for ingredient ${e.ingredient.name}`)}else if("SUB_RECIPE"===e.type&&e.subRecipe){let b=a(e.subRecipe),c=e.subRecipe.yieldQuantity;c>0&&(d+=b/c*e.quantityGross)}return d},"formatCurrency",()=>d],12397)},22066,a=>{"use strict";var b=a.i(7997),c=a.i(73794),d=a.i(59732);async function e(a){let b=await c.prisma.event.findUnique({where:{id:a},include:{menuItems:{include:{recipe:{include:{items:{include:{ingredient:!0,subRecipe:{include:{items:{include:{ingredient:!0}}}}}}}}}}}});if(!b)return[];let d=new Map;for(let a of b.menuItems){let c=a.recipe,e=(a.servingsOverride||b.pax)*b.safetyMargin/(c.yieldQuantity||1);for(let a of c.items)if("INGREDIENT"===a.type&&a.ingredient)f(d,a.ingredient,a.quantityGross*e,a.unit);else if("SUB_RECIPE"===a.type&&a.subRecipe){let b=a.subRecipe,c=a.quantityGross*e/(b.yieldQuantity||1);for(let a of b.items)"INGREDIENT"===a.type&&a.ingredient&&f(d,a.ingredient,a.quantityGross*c,a.unit)}}return Array.from(d.values())}function f(a,b,c,e){let f=a.get(b.id),g=b.pricingUnit,h=(0,d.convertTo)(c,e,g);null===h?console.warn(`Could not convert ${e} to ${g} for ${b.name}`):f?(f.totalQuantity+=h,f.estimatedCost+=h*b.pricePerUnit):a.set(b.id,{ingredient:b,totalQuantity:h,unit:g,estimatedCost:h*b.pricePerUnit})}var g=a.i(12397),h=a.i(95936),i=a.i(52617),j=a.i(717);let k=j.forwardRef(function({title:a,titleId:b,...c},d){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":b},c),a?j.createElement("title",{id:b},a):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))});a.i(70396);var l=a.i(73727);async function m({params:a}){let{id:d}=await a,f=await c.prisma.event.findUnique({where:{id:d}});f||(0,l.notFound)();let j=await e(d),m=j.reduce((a,b)=>a+b.estimatedCost,0);return(0,b.jsxs)("main",{children:[(0,b.jsx)("div",{className:"flex w-full items-center justify-between",children:(0,b.jsx)("nav",{className:"flex","aria-label":"Breadcrumb",children:(0,b.jsxs)("ol",{className:"flex items-center space-x-4",children:[(0,b.jsx)("li",{children:(0,b.jsx)("div",{children:(0,b.jsxs)(h.default,{href:"/dashboard",className:"text-gray-400 hover:text-gray-500",children:[(0,b.jsx)(i.HomeIcon,{className:"h-5 w-5 flex-shrink-0","aria-hidden":"true"}),(0,b.jsx)("span",{className:"sr-only",children:"Home"})]})})}),(0,b.jsx)("li",{children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("span",{className:"text-gray-300",children:"/"}),(0,b.jsx)(h.default,{href:"/dashboard/events",className:"ml-4 text-sm font-medium text-gray-500 hover:text-gray-700",children:"Eventos"})]})}),(0,b.jsx)("li",{children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("span",{className:"text-gray-300",children:"/"}),(0,b.jsx)("span",{className:"ml-4 text-sm font-medium text-gray-500","aria-current":"page",children:"Lista de Compra"})]})})]})})}),(0,b.jsxs)("div",{className:"md:flex md:items-center md:justify-between my-8",children:[(0,b.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,b.jsxs)("h2",{className:"text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight",children:["Lista de Compra: ",f.name]}),(0,b.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:["Basado en ",f.pax," pax + ",Math.round((f.safetyMargin-1)*100),"% margen seguridad."]})]}),(0,b.jsx)("div",{className:"mt-4 flex md:ml-4 md:mt-0",children:(0,b.jsxs)("button",{type:"button",className:"inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50",children:[(0,b.jsx)(k,{className:"-ml-0.5 mr-1.5 h-5 w-5 text-gray-400","aria-hidden":"true"}),"Exportar PDF"]})})]}),(0,b.jsx)("div",{className:"mb-6 grid grid-cols-1 gap-4 rounded-lg bg-green-50 p-4 border border-green-100",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-green-600 font-semibold",children:"Coste Estimado Total Materia Prima"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-green-800",children:(0,g.formatCurrency)(m)})]})}),(0,b.jsx)("div",{className:"mt-8 flow-root",children:(0,b.jsx)("div",{className:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:(0,b.jsx)("div",{className:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8",children:(0,b.jsx)("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-300",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6",children:"Ingrediente"}),(0,b.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"CategorÃ­a"}),(0,b.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Cantidad Total"}),(0,b.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Coste Estimado"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200 bg-white",children:j.map(a=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6",children:a.ingredient.name}),(0,b.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:a.ingredient.category}),(0,b.jsxs)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500 font-bold",children:[a.totalQuantity.toFixed(2)," ",a.unit]}),(0,b.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:(0,g.formatCurrency)(a.estimatedCost)})]},a.ingredient.id))})]})})})})})]})}a.s(["default",()=>m],22066)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__d4946f38._.js.map