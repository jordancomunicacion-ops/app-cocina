module.exports=[79343,a=>{"use strict";var b=a.i(87924),c=a.i(72131);let d=c.forwardRef(function({title:a,titleId:b,...d},e){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},d),a?c.createElement("title",{id:b},a):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}),e=c.forwardRef(function({title:a,titleId:b,...d},e){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},d),a?c.createElement("title",{id:b},a):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"}))});function f(){let[a,f]=(0,c.useState)(!1),g=(0,c.useRef)(null),h=async a=>{let b=a.target.files?.[0];if(!b)return;f(!0);let c=new FileReader;c.onload=async a=>{let b=a.target?.result;if(!b)return;let c=b.split(/\r?\n/).slice(1).map(a=>{let b=a.split(",");if(b.length<4)return null;let[c,d,e,f,g,h]=b;return{name:c?.trim(),category:d?.trim()||"Otros",pricingUnit:e?.trim()||"KG",pricePerUnit:parseFloat(f?.trim()||"0"),yieldPercent:parseFloat(g?.trim()||"100"),allergens:h?h.replace(/"/g,"").split(";").map(a=>a.trim()):[]}}).filter(a=>a&&a.name);try{let a=await fetch("/api/products/batch",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}});if(a.ok){let b=await a.json();alert(`Se han cargado ${b.count} productos correctamente.`),window.location.reload()}else alert("Error al cargar productos. Verifique el formato del CSV.")}catch(a){console.error(a),alert("Error de conexiÃ³n con el servidor.")}finally{f(!1),g.current&&(g.current.value="")}},c.readAsText(b)};return(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("button",{onClick:()=>{let a=new Blob([["Nombre,Categoria,Unidad (KG/L/UD),Precio,Rendimiento (%),Alergenos (Separados por coma)",...[["Tomate Pera","Verduras","KG","1.50","100",""],["Harina Trigo","Secos","KG","0.80","100","Gluten"]].map(a=>a.join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),b=URL.createObjectURL(a),c=document.createElement("a");c.href=b,c.setAttribute("download","plantilla_productos.csv"),document.body.appendChild(c),c.click(),document.body.removeChild(c)},className:"flex items-center gap-2 px-4 py-2 bg-white border border-blue-200 text-blue-700 rounded-md hover:bg-blue-50 text-sm font-medium shadow-sm transition-colors",title:"Descargar plantilla CSV",children:[(0,b.jsx)(d,{className:"w-5 h-5"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Plantilla CSV"})]}),(0,b.jsx)("input",{type:"file",id:"csv-upload",ref:g,onChange:h,accept:".csv",className:"hidden"}),(0,b.jsxs)("label",{htmlFor:"csv-upload",className:`flex items-center gap-2 px-4 py-2 bg-white border border-blue-200 text-blue-700 rounded-md hover:bg-blue-50 text-sm font-medium shadow-sm transition-colors cursor-pointer ${a?"opacity-50 cursor-not-allowed":""}`,children:[(0,b.jsx)(e,{className:"w-5 h-5"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:a?"Cargando...":"Cargar CSV"})]})]})}a.s(["CsvManager",()=>f],79343)}];

//# sourceMappingURL=apps_web_app_ui_inventory_CsvManager_tsx_e7820f02._.js.map