{"version":3,"sources":["../../../../../../apps/web/app/lib/smart-shopping.ts","../../../../../../apps/web/app/dashboard/purchasing/page.tsx"],"sourcesContent":["import { prisma } from '@/lib/prisma';\r\nimport { Ingredient, Transformation, TransformationOutput, SupplierProduct } from '@prisma/client';\r\n\r\ninterface IngredientDemand {\r\n    ingredientId: string;\r\n    ingredientName: string;\r\n    quantity: number;\r\n    unit: string;\r\n}\r\n\r\ninterface PurchaseRecommendation {\r\n    type: 'DIRECT' | 'TRANSFORMATION';\r\n    productId?: string;\r\n    productName: string;\r\n    supplier?: string;\r\n    quantityToBuy: number; // In product's buying unit (e.g., KG)\r\n    reason: string;\r\n    score: number; // Higher is better (0-100)\r\n    coveredIngredients: { name: string, quantity: number, percentage: number }[];\r\n    wasteOrSurplus: { name: string, quantity: number }[];\r\n}\r\n\r\nexport async function calculateSmartShoppingList(startDate: Date, endDate: Date) {\r\n    // 1. Fetch Events & Aggregate Demand\r\n    const events = await prisma.event.findMany({\r\n        where: {\r\n            date: {\r\n                gte: startDate,\r\n                lte: endDate\r\n            },\r\n            status: 'CONFIRMED'\r\n        },\r\n        include: {\r\n            menuItems: {\r\n                include: {\r\n                    recipe: {\r\n                        include: {\r\n                            items: {\r\n                                include: {\r\n                                    ingredient: true,\r\n                                    subRecipe: {\r\n                                        include: {\r\n                                            items: {\r\n                                                include: { ingredient: true }\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    const demandMap = new Map<string, IngredientDemand>();\r\n\r\n    // Helper to add demand\r\n    const addDemand = (ingId: string, name: string, qty: number, unit: string) => {\r\n        const current = demandMap.get(ingId) || { ingredientId: ingId, ingredientName: name, quantity: 0, unit };\r\n        current.quantity += qty;\r\n        demandMap.set(ingId, current);\r\n    };\r\n\r\n    // Calculate Raw Ingredient Needs (flattening sub-recipes one level deep for simplicity for now)\r\n    // TODO: Recursive flattening for deep sub-recipes\r\n    events.forEach(event => {\r\n        event.menuItems.forEach(menuItem => {\r\n            const pax = menuItem.servingsOverride || event.pax;\r\n            // Apply safety margin (e.g. 1.1)\r\n            const qtyMultiplier = (pax / menuItem.recipe.yieldQuantity) * event.safetyMargin;\r\n\r\n            menuItem.recipe.items.forEach(item => {\r\n                if (item.type === 'INGREDIENT' && item.ingredient) {\r\n                    addDemand(item.ingredient.id, item.ingredient.name, item.quantityGross * qtyMultiplier, item.unit);\r\n                } else if (item.type === 'SUB_RECIPE' && item.subRecipe) {\r\n                    // For now, assume sub-recipe items are what we need. \r\n                    // ideally we recurse. Simplified:\r\n                    const subMultiplier = (item.quantityGross / item.subRecipe.yieldQuantity) * qtyMultiplier;\r\n                    item.subRecipe.items.forEach(subItem => {\r\n                        if (subItem.type === 'INGREDIENT' && subItem.ingredient) {\r\n                            addDemand(subItem.ingredient.id, subItem.ingredient.name, subItem.quantityGross * subMultiplier, subItem.unit);\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        });\r\n    });\r\n\r\n    const needs = Array.from(demandMap.values());\r\n    const recommendations: PurchaseRecommendation[] = [];\r\n\r\n    // 2. Resolve Needs\r\n    // For each needed ingredient, find if it comes from a transformation\r\n    for (const need of needs) {\r\n        // Find transformations that produce this ingredient\r\n        const transformations = await prisma.transformation.findMany({\r\n            where: {\r\n                outputs: {\r\n                    some: { ingredientId: need.ingredientId }\r\n                }\r\n            },\r\n            include: {\r\n                sourceProduct: true,\r\n                outputs: { include: { ingredient: true } }\r\n            }\r\n        });\r\n\r\n        if (transformations.length === 0) {\r\n            // No transformation found -> Direct Buy\r\n            recommendations.push({\r\n                type: 'DIRECT',\r\n                productName: need.ingredientName, // Or find a linked SupplierProduct\r\n                quantityToBuy: need.quantity,\r\n                reason: 'Compra directa (sin transformación conocida)',\r\n                score: 100,\r\n                coveredIngredients: [{ name: need.ingredientName, quantity: need.quantity, percentage: 100 }],\r\n                wasteOrSurplus: []\r\n            });\r\n            continue;\r\n        }\r\n\r\n        // Evaluate transformations\r\n        // We look for the \"Best Fit\".\r\n        // A \"Solomillo\" might produce \"Punta\" (Need) AND \"Centro\" (Maybe Need) AND \"Cabeza\" (Maybe Need).\r\n\r\n        let bestTrans = null;\r\n        let bestScore = -1;\r\n\r\n        for (const trans of transformations) {\r\n            // Target output for our current need\r\n            const targetOutput = trans.outputs.find(o => o.ingredientId === need.ingredientId);\r\n            if (!targetOutput) continue;\r\n\r\n            const yieldPct = targetOutput.percentage; // e.g., 20%\r\n            const rawProductNeeded = need.quantity / (yieldPct / 100);\r\n\r\n            // Calculate \"Utility Score\"\r\n            // Utility = (Useful Output Mass / Total Mass) * 100\r\n            // Useful Output = Mass of Need + Mass of OTHER outputs that are ALSO needed.\r\n\r\n            let usefulMass = need.quantity;\r\n            const covered: any[] = [{ name: need.ingredientName, quantity: need.quantity, percentage: yieldPct }];\r\n            const waste: any[] = [];\r\n\r\n            // Check other outputs\r\n            trans.outputs.forEach(output => {\r\n                if (output.ingredientId === need.ingredientId) return; // Skip self\r\n\r\n                const outputQty = rawProductNeeded * (output.percentage / 100);\r\n                const otherNeed = demandMap.get(output.ingredientId || '');\r\n\r\n                if (otherNeed) {\r\n                    // We need this too!\r\n                    // Cap utility at needed quantity (surplus is still waste-ish unless we store it)\r\n                    // For this logic, let's say we value it fully up to the needed amount.\r\n                    const useful = Math.min(outputQty, otherNeed.quantity);\r\n                    usefulMass += useful;\r\n                    covered.push({ name: output.ingredient?.name, quantity: useful, percentage: output.percentage });\r\n\r\n                    if (outputQty > otherNeed.quantity) {\r\n                        waste.push({ name: output.ingredient?.name || 'Unknown', quantity: outputQty - otherNeed.quantity });\r\n                    }\r\n                } else {\r\n                    // We don't need this -> Waste / Surplus\r\n                    waste.push({ name: output.ingredient?.name || 'Unknown', quantity: outputQty });\r\n                }\r\n            });\r\n\r\n            const score = (usefulMass / rawProductNeeded) * 100; // 0 to 100% utilization relative to needs\r\n\r\n            if (score > bestScore) {\r\n                bestScore = score;\r\n                bestTrans = {\r\n                    trans,\r\n                    rawProductNeeded,\r\n                    score,\r\n                    covered,\r\n                    waste\r\n                };\r\n            }\r\n        }\r\n\r\n        if (bestTrans) {\r\n            recommendations.push({\r\n                type: 'TRANSFORMATION',\r\n                productId: bestTrans.trans.sourceProduct.id,\r\n                productName: bestTrans.trans.sourceProduct.name,\r\n                supplier: bestTrans.trans.sourceProduct.supplier || undefined,\r\n                quantityToBuy: bestTrans.rawProductNeeded,\r\n                reason: `Mejor aprovechamiento (${bestTrans.score.toFixed(0)}%). Cubre: ${bestTrans.covered.map(c => c.name).join(', ')}`,\r\n                score: bestTrans.score,\r\n                coveredIngredients: bestTrans.covered,\r\n                wasteOrSurplus: bestTrans.waste\r\n            });\r\n            // TODO: We should mark these other needs as \"Satisfied\" so we don't double count them in the main loop!\r\n            // For this POC, we might have duplicates if we process \"Centro\" next.\r\n        }\r\n    }\r\n\r\n    // Deduplication step (Naive)\r\n    // If we decided to buy Solomillo for \"Punta\", and later we process \"Centro\" and decide to buy Solomillo again...\r\n    // We need a more unified approach.\r\n    // Ideally, we group needs by \"Possible Sources\" and solve. \r\n    // Implementing a simple \"Satisfied\" set for the POC.\r\n\r\n    return recommendations;\r\n}\r\n","import { Suspense } from 'react';\r\nimport { calculateSmartShoppingList } from '@/app/lib/smart-shopping';\r\nimport { CalendarIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\r\n\r\nexport default async function Page({\r\n    searchParams,\r\n}: {\r\n    searchParams?: Promise<{\r\n        start?: string;\r\n        end?: string;\r\n    }>;\r\n}) {\r\n    const params = await searchParams;\r\n    // Default to next 30 days if not specified\r\n    const startDate = params?.start ? new Date(params.start) : new Date();\r\n    const endDate = params?.end ? new Date(params.end) : new Date(new Date().setDate(new Date().getDate() + 30));\r\n\r\n    const recommendations = await calculateSmartShoppingList(startDate, endDate);\r\n\r\n    return (\r\n        <main>\r\n            <h1 className=\"mb-4 text-2xl font-bold\">Planificación de Compras</h1>\r\n            <p className=\"mb-8 text-gray-500\">\r\n                Análisis de necesidades basado en eventos confirmados ({startDate.toLocaleDateString()} - {endDate.toLocaleDateString()}).\r\n            </p>\r\n\r\n            <div className=\"grid gap-6 lg:grid-cols-2\">\r\n                {/* Recommendations List */}\r\n                <div className=\"lg:col-span-2\">\r\n                    <div className=\"overflow-hidden rounded-xl bg-white shadow-sm ring-1 ring-gray-900/5\">\r\n                        <div className=\"border-b border-gray-200 bg-gray-50 px-4 py-3 sm:px-6\">\r\n                            <h3 className=\"text-base font-semibold leading-6 text-gray-900\">Recomendaciones de Compra</h3>\r\n                        </div>\r\n                        <ul role=\"list\" className=\"divide-y divide-gray-100\">\r\n                            {recommendations.length === 0 && (\r\n                                <li className=\"p-6 text-center text-gray-500 italic\">No hay necesidades detectadas para este periodo.</li>\r\n                            )}\r\n                            {recommendations.map((rec, idx) => (\r\n                                <li key={idx} className=\"flex flex-wrap items-center justify-between gap-x-6 gap-y-4 py-5 sm:flex-nowrap px-6 hover:bg-gray-50\">\r\n                                    <div className=\"flex-grow\">\r\n                                        <div className=\"flex items-center gap-x-2\">\r\n                                            <p className=\"text-sm font-semibold leading-6 text-gray-900\">\r\n                                                {rec.productName}\r\n                                            </p>\r\n                                            {rec.type === 'TRANSFORMATION' && (\r\n                                                <span className=\"inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20\">\r\n                                                    Optimización ({rec.score.toFixed(0)}%)\r\n                                                </span>\r\n                                            )}\r\n                                            {rec.type === 'DIRECT' && (\r\n                                                <span className=\"inline-flex items-center rounded-md bg-gray-50 px-2 py-1 text-xs font-medium text-gray-600 ring-1 ring-inset ring-gray-500/10\">\r\n                                                    Directo\r\n                                                </span>\r\n                                            )}\r\n                                        </div>\r\n                                        <div className=\"mt-1 flex items-center gap-x-2 text-xs leading-5 text-gray-500\">\r\n                                            <p>{rec.reason}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"flex flex-none items-center gap-x-4\">\r\n                                        <div className=\"flex flex-col items-end\">\r\n                                            <p className=\"text-sm font-bold text-gray-900\">{rec.quantityToBuy.toFixed(2)} KG</p> {/* Assuming KG for now */}\r\n                                            {rec.supplier && <p className=\"text-xs text-gray-500\">{rec.supplier}</p>}\r\n                                        </div>\r\n                                        <button className=\"rounded-md bg-white px-2.5 py-1.5 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50\">\r\n                                            Añadir\r\n                                        </button>\r\n                                    </div>\r\n                                    {/* Breakdown details */}\r\n                                    <div className=\"w-full mt-2 pl-4 border-l-2 border-gray-100\">\r\n                                        <details className=\"group\">\r\n                                            <summary className=\"flex cursor-pointer items-center text-xs font-medium text-blue-600 hover:text-blue-800\">\r\n                                                Ver detalle de uso\r\n                                            </summary>\r\n                                            <div className=\"mt-2 space-y-1 text-xs text-gray-600\">\r\n                                                <p className=\"font-semibold text-gray-900\">Cubierto:</p>\r\n                                                {rec.coveredIngredients.map((cov, i) => (\r\n                                                    <p key={i}>- {cov.name}: {cov.quantity.toFixed(2)} ({cov.percentage}%)</p>\r\n                                                ))}\r\n                                                {rec.wasteOrSurplus.length > 0 && (\r\n                                                    <>\r\n                                                        <p className=\"font-semibold text-gray-900 mt-2\">Excedente / Merma:</p>\r\n                                                        {rec.wasteOrSurplus.map((waste, i) => (\r\n                                                            <p key={i} className=\"text-orange-600\">- {waste.name}: {waste.quantity.toFixed(2)}</p>\r\n                                                        ))}\r\n                                                    </>\r\n                                                )}\r\n                                            </div>\r\n                                        </details>\r\n                                    </div>\r\n                                </li>\r\n                            ))}\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </main>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}