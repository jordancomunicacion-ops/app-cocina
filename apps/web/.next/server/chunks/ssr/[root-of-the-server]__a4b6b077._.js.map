{"version":3,"sources":["../../../../../../apps/web/app/ui/tasks/buttons.tsx/__nextjs-internal-proxy.mjs","../../../../../../apps/web/app/ui/tasks/board.tsx","../../../../../../apps/web/app/dashboard/tasks/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const CreateTask = registerClientReference(\n    function() { throw new Error(\"Attempted to call CreateTask() from the server but CreateTask is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/app/ui/tasks/buttons.tsx\",\n    \"CreateTask\",\n);\nexport const TaskStatusButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call TaskStatusButton() from the server but TaskStatusButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/apps/web/app/ui/tasks/buttons.tsx\",\n    \"TaskStatusButton\",\n);\n","import { TaskStatusButton } from '@/app/ui/tasks/buttons';\r\nimport { prisma } from '@/lib/prisma';\r\nimport clsx from 'clsx';\r\nimport { User, Recipe } from '@prisma/client';\r\n\r\ntype TaskWithRelations = {\r\n    id: string;\r\n    title: string;\r\n    description: string | null;\r\n    status: string;\r\n    assignedTo: User | null;\r\n    recipe: Recipe | null;\r\n    plannedStart: Date | null;\r\n    plannedEnd: Date | null;\r\n};\r\n\r\nexport default async function TaskBoard() {\r\n    const tasks = await prisma.task.findMany({\r\n        include: {\r\n            assignedTo: true,\r\n            recipe: true\r\n        },\r\n        orderBy: { createdAt: 'desc' },\r\n    });\r\n\r\n    const columns = [\r\n        { id: 'PENDING', title: 'Pendiente', color: 'bg-gray-50 border-gray-200' },\r\n        { id: 'IN_PROGRESS', title: 'En Curso', color: 'bg-blue-50 border-blue-200' },\r\n        { id: 'DONE', title: 'Completado', color: 'bg-green-50 border-green-200' },\r\n        { id: 'ISSUE', title: 'Incidencia', color: 'bg-red-50 border-red-200' },\r\n    ];\r\n\r\n    return (\r\n        <div className=\"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4 overflow-x-auto min-w-[800px] pb-4\">\r\n            {columns.map(col => (\r\n                <div key={col.id} className={`rounded-lg border p-4 ${col.color} min-h-[500px]`}>\r\n                    <h3 className=\"font-bold text-gray-700 mb-4 flex justify-between items-center\">\r\n                        {col.title}\r\n                        <span className=\"bg-white px-2 py-0.5 rounded text-sm text-gray-500 border\">\r\n                            {tasks.filter(t => t.status === col.id).length}\r\n                        </span>\r\n                    </h3>\r\n                    <div className=\"space-y-3\">\r\n                        {tasks.filter(t => t.status === col.id).map(task => (\r\n                            <div key={task.id} className=\"bg-white p-3 rounded shadow-sm border border-gray-100\">\r\n                                <h4 className=\"font-semibold text-gray-900\">{task.title}</h4>\r\n                                {task.description && <p className=\"text-xs text-gray-500 mt-1 line-clamp-2\">{task.description}</p>}\r\n\r\n                                <div className=\"mt-2 flex flex-wrap gap-2 text-xs text-gray-600\">\r\n                                    {task.assignedTo && (\r\n                                        <span className=\"bg-purple-100 text-purple-700 px-1.5 py-0.5 rounded\">\r\n                                            {task.assignedTo.name}\r\n                                        </span>\r\n                                    )}\r\n                                    {task.recipe && (\r\n                                        <span className=\"bg-orange-100 text-orange-700 px-1.5 py-0.5 rounded\">\r\n                                            üç≥ {task.recipe.name}\r\n                                        </span>\r\n                                    )}\r\n                                </div>\r\n\r\n                                <div className=\"mt-3 flex justify-end gap-1 pt-2 border-t border-gray-50\">\r\n                                    {/* Status Transitions */}\r\n                                    {task.status === 'PENDING' && <TaskStatusButton id={task.id} status=\"IN_PROGRESS\" currentStatus={task.status} />}\r\n                                    {task.status === 'IN_PROGRESS' && <TaskStatusButton id={task.id} status=\"DONE\" currentStatus={task.status} />}\r\n                                    {task.status === 'IN_PROGRESS' && <TaskStatusButton id={task.id} status=\"ISSUE\" currentStatus={task.status} />}\r\n                                    {task.status === 'ISSUE' && <TaskStatusButton id={task.id} status=\"PENDING\" currentStatus={task.status} />}\r\n                                    {task.status === 'ISSUE' && <TaskStatusButton id={task.id} status=\"DONE\" currentStatus={task.status} />}\r\n                                    {/* Anyone can move back to pending if needed or other transitions */}\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                        {tasks.filter(t => t.status === col.id).length === 0 && (\r\n                            <div className=\"text-center py-8 text-gray-400 text-sm italic\">\r\n                                Sin tareas\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            ))}\r\n        </div>\r\n    );\r\n}\r\n","import TaskBoard from '@/app/ui/tasks/board';\r\nimport { CreateTask } from '@/app/ui/tasks/buttons';\r\nimport { Suspense } from 'react';\r\n\r\nexport default function Page() {\r\n    return (\r\n        <div className=\"w-full h-full flex flex-col\">\r\n            <div className=\"flex w-full items-center justify-between\">\r\n                <h1 className=\"text-2xl\">Tablero de Tareas</h1>\r\n            </div>\r\n            <div className=\"mt-4 flex items-center justify-between gap-2 md:mt-8\">\r\n                <CreateTask />\r\n            </div>\r\n            <div className=\"flex-grow overflow-hidden\">\r\n                <Suspense fallback={<div>Cargando tareas...</div>}>\r\n                    <TaskBoard />\r\n                </Suspense>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","ignoreList":[0]}