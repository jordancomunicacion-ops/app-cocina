{"version":3,"sources":["../../../../../../apps/web/app/lib/actions/data%3A773401%20%3Ctext/javascript%3E","../../../../../../apps/web/app/ui/employees/edit-form.tsx"],"sourcesContent":["/* __next_internal_action_entry_do_not_use__ [{\"704b45fae82c538e1d9b7027154b2c9807db350eff\":\"updateUser\"},\"apps/web/app/lib/actions/employees.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_1=/*#__PURE__*/createServerReference(\"704b45fae82c538e1d9b7027154b2c9807db350eff\",callServer,void 0,findSourceMapURL,\"updateUser\");export{$$RSC_SERVER_ACTION_1 as updateUser};","'use client';\r\n\r\nimport { updateUser } from '@/app/lib/actions/employees';\r\nimport { UserFormState } from '@/app/lib/definitions';\r\nimport Link from 'next/link';\r\nimport {\r\n    UserIcon,\r\n    EnvelopeIcon,\r\n    KeyIcon,\r\n    ShieldCheckIcon,\r\n} from '@heroicons/react/24/outline';\r\nimport { useActionState } from 'react';\r\nimport { User } from '@prisma/client';\r\n\r\nexport default function EditForm({ user }: { user: any }) {\r\n    // user: any used temporarily to avoid type errors if runtime types aren't fresh yet\r\n    const initialState: UserFormState = { message: null, errors: {} };\r\n    const updateUserWithId = updateUser.bind(null, user.id);\r\n    const [state, formAction] = useActionState(updateUserWithId, initialState);\r\n\r\n    return (\r\n        <form action={formAction}>\r\n            <div className=\"rounded-xl bg-white p-6 shadow-sm border border-gray-100\">\r\n\r\n                {/* GRID LAYOUT */}\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n\r\n                    {/* 1. Account Info */}\r\n                    <div className=\"space-y-4\">\r\n                        <h4 className=\"text-xs font-bold text-gray-400 uppercase tracking-wider border-b pb-1\">Cuenta</h4>\r\n\r\n                        {/* Name (Username) */}\r\n                        <div>\r\n                            <label htmlFor=\"name\" className=\"block text-sm font-medium text-gray-700 mb-1\">Nombre de Usuario</label>\r\n                            <input\r\n                                id=\"name\"\r\n                                name=\"name\"\r\n                                type=\"text\"\r\n                                defaultValue={user.name}\r\n                                placeholder=\"Ej. jperez\"\r\n                                className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 outline-none\"\r\n                                aria-describedby=\"name-error\"\r\n                            />\r\n                            <div id=\"name-error\" aria-live=\"polite\" aria-atomic=\"true\">\r\n                                {state.errors?.name && state.errors.name.map((error: string) => (\r\n                                    <p key={error} className=\"mt-1 text-xs text-red-500\">{error}</p>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Email */}\r\n                        <div>\r\n                            <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700 mb-1\">Email (Acceso)</label>\r\n                            <input\r\n                                id=\"email\"\r\n                                name=\"email\"\r\n                                type=\"email\"\r\n                                defaultValue={user.email}\r\n                                placeholder=\"juan@cocina.com\"\r\n                                className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 outline-none\"\r\n                            />\r\n                            <div id=\"email-error\" aria-live=\"polite\" aria-atomic=\"true\">\r\n                                {state.errors?.email && state.errors.email.map((error: string) => (\r\n                                    <p key={error} className=\"mt-1 text-xs text-red-500\">{error}</p>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Password */}\r\n                        <div>\r\n                            <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700 mb-1\">Nueva Contraseña (Opcional)</label>\r\n                            <input\r\n                                id=\"password\"\r\n                                name=\"password\"\r\n                                type=\"password\"\r\n                                placeholder=\"Dejar vacía para no cambiar\"\r\n                                className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 outline-none\"\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Role */}\r\n                        <div>\r\n                            <label htmlFor=\"role\" className=\"block text-sm font-medium text-gray-700 mb-1\">Rol de Acceso</label>\r\n                            <select\r\n                                id=\"role\"\r\n                                name=\"role\"\r\n                                className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 outline-none bg-white\"\r\n                                defaultValue={user.role}\r\n                            >\r\n                                <option value=\"EMPLOYEE\">Empleado</option>\r\n                                <option value=\"CHEF\">Jefe de Cocina</option>\r\n                                <option value=\"ADMIN\">Administrador</option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* 2. Personal Info */}\r\n                    <div className=\"space-y-4\">\r\n                        <h4 className=\"text-xs font-bold text-gray-400 uppercase tracking-wider border-b pb-1\">Datos Personales</h4>\r\n                        <div className=\"grid grid-cols-2 gap-2\">\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Nombre</label>\r\n                                <input\r\n                                    name=\"firstName\"\r\n                                    defaultValue={user.firstName || ''}\r\n                                    className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 outline-none\"\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Apellidos</label>\r\n                                <input\r\n                                    name=\"lastName\"\r\n                                    defaultValue={user.lastName || ''}\r\n                                    className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 outline-none\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"grid grid-cols-2 gap-2\">\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">DNI / NIE</label>\r\n                                <input\r\n                                    name=\"dni\"\r\n                                    defaultValue={user.dni || ''}\r\n                                    className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 outline-none\"\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">F. Nacimiento</label>\r\n                                {/* Format date to YYYY-MM-DD for input type=date */}\r\n                                <input\r\n                                    name=\"dob\"\r\n                                    type=\"date\"\r\n                                    defaultValue={user.dob ? new Date(user.dob).toISOString().split('T')[0] : ''}\r\n                                    className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 outline-none\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* 3. Job Info */}\r\n                    <div className=\"space-y-4\">\r\n                        <h4 className=\"text-xs font-bold text-gray-400 uppercase tracking-wider border-b pb-1\">Ficha Técnica</h4>\r\n                        <div>\r\n                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Puesto / Cargo</label>\r\n                            <input\r\n                                name=\"jobTitle\"\r\n                                defaultValue={user.jobTitle || ''}\r\n                                className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 outline-none\"\r\n                                placeholder=\"Ej: Cocinero, Camarero...\"\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Teléfono Contacto</label>\r\n                            <input\r\n                                name=\"phone\"\r\n                                defaultValue={user.phone || ''}\r\n                                className=\"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 outline-none\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                <div aria-live=\"polite\" aria-atomic=\"true\">\r\n                    {state.message && (\r\n                        <p className=\"mt-4 text-sm text-red-500\">{state.message}</p>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"mt-6 flex justify-end gap-4\">\r\n                <Link\r\n                    href=\"/dashboard/employees\"\r\n                    className=\"flex h-10 items-center rounded-lg bg-gray-100 px-4 text-sm font-medium text-gray-600 transition-colors hover:bg-gray-200\"\r\n                >\r\n                    Cancelar\r\n                </Link>\r\n                <button\r\n                    type=\"submit\"\r\n                    className=\"flex h-10 items-center rounded-lg bg-blue-600 px-4 text-sm font-medium text-white transition-colors hover:bg-blue-500 shadow-sm\"\r\n                >\r\n                    Actualizar Empleado\r\n                </button>\r\n            </div>\r\n        </form>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}