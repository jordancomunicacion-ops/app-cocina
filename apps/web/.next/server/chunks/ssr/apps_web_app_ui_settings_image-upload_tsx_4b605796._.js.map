{"version":3,"sources":["../../../../../../apps/web/app/ui/settings/image-upload.tsx","../../../../../../node_modules/%40heroicons/react/24/outline/esm/CameraIcon.js","../../../../../../node_modules/%40heroicons/react/24/outline/esm/PhotoIcon.js"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useRef } from 'react';\r\nimport { CameraIcon, PhotoIcon } from '@heroicons/react/24/outline';\r\n\r\ninterface ImageUploadProps {\r\n    currentImage?: string | null;\r\n    onUpload: (formData: FormData) => Promise<{ success?: boolean; imageUrl?: string; error?: string }>;\r\n    label: string;\r\n    shape?: 'circle' | 'square';\r\n    alt: string;\r\n}\r\n\r\nexport default function ImageUpload({ currentImage, onUpload, label, shape = 'circle', alt }: ImageUploadProps) {\r\n    const [isUploading, setIsUploading] = useState(false);\r\n    const [preview, setPreview] = useState<string | null>(currentImage || null);\r\n    const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n    const handleFileChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0];\r\n        if (!file) return;\r\n\r\n        // Show preview immediately\r\n        const objectUrl = URL.createObjectURL(file);\r\n        setPreview(objectUrl);\r\n\r\n        // Upload\r\n        setIsUploading(true);\r\n        const formData = new FormData();\r\n        formData.append('file', file);\r\n\r\n        try {\r\n            const result = await onUpload(formData);\r\n            if (result.error) {\r\n                alert(result.error);\r\n                setPreview(currentImage || null); // Revert on error\r\n            } else if (result.imageUrl) {\r\n                setPreview(result.imageUrl);\r\n            }\r\n        } catch (err) {\r\n            console.error(err);\r\n            alert('Error uploading image');\r\n            setPreview(currentImage || null);\r\n        } finally {\r\n            setIsUploading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex flex-col items-center gap-4\">\r\n            <div className=\"relative group cursor-pointer\" onClick={() => fileInputRef.current?.click()}>\r\n                <div\r\n                    className={`\r\n            overflow-hidden border-4 border-white shadow-lg shrink-0 bg-gray-100 flex items-center justify-center\r\n            ${shape === 'circle' ? 'rounded-full w-32 h-32' : 'rounded-lg w-full max-w-xs h-32'}\r\n          `}\r\n                >\r\n                    {preview ? (\r\n                        <img\r\n                            src={preview}\r\n                            alt={alt}\r\n                            className={`w-full h-full object-cover ${isUploading ? 'opacity-50' : ''}`}\r\n                        />\r\n                    ) : (\r\n                        <PhotoIcon className=\"w-12 h-12 text-gray-400\" />\r\n                    )}\r\n\r\n                    {/* Overlay */}\r\n                    <div className=\"absolute inset-0 bg-black/30 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-full\">\r\n                        <CameraIcon className=\"w-8 h-8 text-white\" />\r\n                    </div>\r\n                </div>\r\n\r\n                {isUploading && (\r\n                    <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                        <div className=\"w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin\"></div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            <button\r\n                type=\"button\"\r\n                onClick={() => fileInputRef.current?.click()}\r\n                disabled={isUploading}\r\n                className=\"text-sm font-medium text-indigo-600 hover:text-indigo-800 disabled:opacity-50\"\r\n            >\r\n                {isUploading ? 'Subiendo...' : label}\r\n            </button>\r\n\r\n            <input\r\n                ref={fileInputRef}\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                onChange={handleFileChange}\r\n                className=\"hidden\"\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","import * as React from \"react\";\nfunction CameraIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(CameraIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction PhotoIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(PhotoIcon);\nexport default ForwardRef;"],"names":[],"mappings":"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","ignoreList":[1,2]}